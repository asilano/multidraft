- if resource.provider.blank?
  = render "devise/shared/openid_form", :action => 'sign up'

= form_for(resource, :as => resource_name, :url => registration_path(resource_name)) do |f|
  = devise_error_messages! unless flash[:suppress_error_box]
  = f.hidden_field :provider
  = f.hidden_field :uid
  %fieldset
    %legend Sign up
    - if resource.provider.present?
      .good-info= "This account will be associated with an OpenID provider"
    %div
      = f.label :name
      = f.text_field :name, :autofocus => true, :size => 50
      - if resource.errors[:name].present?
        %span.error-explain= "#{resource_class.human_attribute_name('name')} #{resource.errors[:name].join('; ')}"
    %div
      = f.label :email
      = f.email_field :email, :size => 50
      - if resource.errors[:email].present?
        %span.error-explain= "#{resource_class.human_attribute_name('email')} #{resource.errors[:email].join('; ')}"
    %div
      = f.label :password
      = f.password_field :password, :size => 50
      - if resource.provider
        %span.explain (optional for OpenID users)
      - if resource.errors[:password].present?
        %span.error-explain= "#{resource_class.human_attribute_name('password')} #{resource.errors[:password].join('; ')}"
    %div
      = f.label :password_confirmation
      = f.password_field :password_confirmation, :size => 50
      - if resource.provider
        %span.explain (optional for OpenID users)
      - if resource.errors[:password_confirmation].present?
        %span.error-explain= "#{resource_class.human_attribute_name('password_confirmation')} #{resource.errors[:password_confirmation].join('; ')}"
    %div
      = f.submit "Sign up"
      = link_to 'Cancel sign up', cancel_registration_path(resource_name), :class => 'button'
= render "devise/shared/links"

= javascript_include_tag 'openid'